index.html
import random
import time

class InfoAgent:
    """负责身份验证和交易数据收集的Agent"""
    def __init__(self):
        self.users = {"admin": "admin123", "user1": "pass1", "user2": "pass2"}
        self.transactions = []
    
    def authenticate(self, username, password):
        return self.users.get(username) == password
    
    def record_transaction(self, user, amount):
        transaction = {
            "user": user,
            "amount": amount,
            "timestamp": time.time()
        }
        self.transactions.append(transaction)
        return transaction

class DataMiningAgent:
    """分析交易数据并检测异常行为"""
    def __init__(self, transactions):
        self.transactions = transactions
    
    def detect_anomalies(self, threshold=5000):
        anomalies = [t for t in self.transactions if t["amount"] > threshold]
        return anomalies

class TransactionMonitorAgent:
    """监控交易，防止欺诈"""
    def __init__(self, transactions):
        self.transactions = transactions
    
    def check_fraud(self, user, amount, max_limit=10000):
        if amount > max_limit:
            return False, "交易失败：超过最大交易限制！"
        return True, "交易成功！"

def get_mock_input(prompt):
    """模拟输入，避免I/O错误"""
    mock_inputs = {
        "请输入用户名: ": "admin",
        "请输入密码: ": "admin123",
        "请输入选项(1-3): ": "3",
        "请输入交易金额: ": "1000"
    }
    return mock_inputs.get(prompt, "")

def main():
    agent = InfoAgent()
    print("欢迎进入银行后台系统")
    
    username = get_mock_input("请输入用户名: ")
    password = get_mock_input("请输入密码: ")
    
    if not username or not password:
        print("输入错误，程序终止。")
        return
    
    if not agent.authenticate(username, password):
        print("身份验证失败！")
        return
    
    print("登录成功！")
    
    while True:
        print("\n请选择操作:")
        print("1. 进行交易")
        print("2. 查看异常交易")
        print("3. 退出")
        
        choice = get_mock_input("请输入选项(1-3): ")
        
        if choice == "1":
            try:
                amount = float(get_mock_input("请输入交易金额: "))
                transaction = agent.record_transaction(username, amount)
                monitor = TransactionMonitorAgent(agent.transactions)
                success, message = monitor.check_fraud(username, amount)
                print(message)
            except ValueError:
                print("输入错误，请输入有效的金额。")
        
        elif choice == "2":
            mining_agent = DataMiningAgent(agent.transactions)
            anomalies = mining_agent.detect_anomalies()
            print("异常交易记录:", anomalies if anomalies else "无异常交易")
        
        elif choice == "3":
            print("退出系统。")
            break
        else:
            print("无效选项，请重新输入。")

if __name__ == "__main__":
    main()
